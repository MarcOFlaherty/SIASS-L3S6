{
  "hash": "f216991d2f1b4805108ad85e9581e369",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"S√©quence 1 : Prise en main & statistiques descriptives\"\nsubtitle: \"Analyse des in√©galit√©s de d√©veloppement (Donn√©es PNUD)\"\nauthor: \"Marc O'Flaherty\"\nformat: \n  revealjs:\n    theme: simple\n    slide-number: c/t\n    lightbox: true\n    chalkboard: true\n    footer: \"S√©quence 1 - L3 Sciences Sociales\"\n    echo: true\n---\n\n\n\n\n# Q1. D√©couverte des donn√©es\n*Importation et caract√©risation*\n\n## Pr√©sentation des donn√©es (Q1) {.scrollable}\n\n* **Population √©tudi√©e :** Un √©chantillon de 44 pays (Source PNUD 2017).\n* **Individu statistique :** Le Pays (et non l'habitant).\n* **Variables cl√©s :**\n    * `IDH` : Indice synth√©tique (0 √† 1).\n    * `PIB/t√™te` : Richesse.\n    * `Esp√©rance de vie` : Sant√©.\n    * `Population` : D√©mographie.\n    * `Ratio Palma` : In√©galit√©s (Top 10% / Bottom 40%).\n\n::: {.callout-note}\n### Objectif Q1\nT√©l√©charger le fichier, l'ouvrir et identifier ces variables.\n:::\n\n## Importation : La technique\n\n::: {.panel-tabset}\n\n### üü¢ Sur Excel\n1.  Ouvrez le fichier `DonneesTD1.xlsx`.\n\n### üîµ Sur R\n::: {style=\"max-height: 400px; overflow-y: auto;\"}\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(readxl)\n\n# --- √âTAPE 1 : D√âFINIR LE FICHIER ---\n# Remplacez ce chemin par le v√¥tre !\nmon_fichier <- \"C:/Users/oflah/Downloads/DonneesTD1.xlsx\" \n\n# --- √âTAPE 2 : IMPORTER ---\ndf <- read_excel(mon_fichier)\n\n# Aper√ßu\nhead(df, 3)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3 √ó 9\n  Pays  `IDH 2017` `PIB/t√™te (2017)` `Esp Vie Naiss 2017` Ann√©es √©ducation (20‚Ä¶¬π\n  <chr>      <dbl>             <dbl>                <dbl>                  <dbl>\n1 Alba‚Ä¶      0.785             11886                 78.5                   14.8\n2 Alg√©‚Ä¶      0.754             13802                 76.3                   14.4\n3 Alle‚Ä¶      0.936             46136                 81.2                   17  \n# ‚Ñπ abbreviated name: ¬π‚Äã`Ann√©es √©ducation (2017)`\n# ‚Ñπ 4 more variables: `Population totale (2017)` <dbl>, `Ratio Palma` <dbl>,\n#   iso3 <chr>, country <chr>\n```\n\n\n:::\n:::\n\n\n\n:::\n:::\n\n# Q2 & Q3. Indicateurs simples\n*Moyenne, Variance, M√©diane, Quartiles*\n\n## Tendance centrale & Dispersion (Q2) {.scrollable}\n\nOn demande la **Moyenne** et la **Variance**.\n\n::: {.callout-tip}\n### üü¢ Sur Excel (Standard Scientifique)\n* **Moyenne :** `=MOYENNE(Plage)`\n* **Variance :** `=VAR.S(Plage)`\n    * *Note :* On utilise la variance d'√©chantillon (.S) qui est le standard en sciences sociales (comme sur R).\n* **√âcart-type :** `=ECARTYPE.STANDARD(Plage)`\n:::\n\n::: {style=\"max-height: 300px; overflow-y: auto;\"}\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calcul des indicateurs pour l'Esp√©rance de vie\ndf %>% summarise(\n  Moyenne = mean(`Esp Vie Naiss 2017`, na.rm = TRUE),\n  Variance = var(`Esp Vie Naiss 2017`, na.rm = TRUE),\n  Ecart_Type = sd(`Esp Vie Naiss 2017`, na.rm = TRUE)\n) %>% knitr::kable(digits = 2)\n```\n\n::: {.cell-output-display}\n\n\n| Moyenne| Variance| Ecart_Type|\n|-------:|--------:|----------:|\n|   73.43|    85.77|       9.26|\n\n\n:::\n:::\n\n\n\n:::\n\n## M√©diane et quantiles (Q3) {.scrollable}\n\nOn d√©coupe la distribution pour voir les in√©galit√©s.\n\n::: {.callout-tip}\n### üü¢ Sur Excel\n* **M√©diane :** `=MEDIANE(Plage)`\n* **Quartiles :** `=QUARTILE.EXC(Plage; 1)` (Q1) et `3` (Q3).\n* **D√©ciles :** `=CENTILE(Plage; 0,1)` (D1) et `0,9` (D9).\n:::\n\n**R√©sultats R :**\n::: {style=\"max-height: 200px; overflow-y: auto;\"}\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# La fonction quantile fait tout d'un coup\nquantile(df$`Esp Vie Naiss 2017`, \n         probs = c(0.1, 0.25, 0.5, 0.75, 0.9), \n         na.rm = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  10%   25%   50%   75%   90% \n59.02 66.20 76.10 81.40 82.67 \n```\n\n\n:::\n:::\n\n\n\n:::\n\n# Q4, Q5 & Q6. Visualisation\n*Boxplot, graphique cumul√© et Histogramme*\n\n## La Bo√Æte √† moustache (Q4) {.scrollable}\n\nVisualiser la m√©diane, l'√©cart interquartile et les extr√™mes.\n\n::: {.columns}\n::: {.column width=\"40%\"}\n**Lecture :**\n* Trait gras = M√©diane (Q2).  \n* Bo√Æte = 50% des pays.  \n* Extr√™mes = Pays atypiques.  \n:::\n\n::: {.column width=\"60%\"}\n::: {style=\"max-height: 400px; overflow-y: auto;\"}\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(df, aes(y = `Esp Vie Naiss 2017`)) +\n  geom_boxplot(fill = \"#404080\", color = \"black\", alpha = 0.6) +\n  labs(title = \"Q4 - Esp√©rance de vie : Boite √† moustaches\", y = \"Ann√©es\") +\n  theme_minimal() +\n  theme(axis.text.x = element_blank())\n```\n\n::: {.cell-output-display}\n![](slides_seq1_files/figure-revealjs/q4-boxplot-1.png){width=960}\n:::\n:::\n\n\n\n:::\n:::\n:::\n\n::: {.callout-tip}\n### üü¢ Sur Excel\nInsertion $\\rightarrow$ Graphiques recommand√©s $\\rightarrow$ Tous les graphiques $\\rightarrow$ **Bo√Æte √† moustaches**.\n:::\n\n## Graphique cumul√© (Q5) {.scrollable}\n\n::: {.callout-tip}\n### üü¢ Sur Excel (M√©thode simple)\n1.  **Triez** la colonne `Esp√©rance de vie` du plus petit au plus grand.  \n2. *Cr√©ez* la m√©diane et **copier/coller** en valeur.  \n2.  S√©lectionnez les valeurs.  \n3.  Insertion $\\rightarrow$ **Histogramme (ou Barres)**.  \n    * *R√©sultat :* Des b√¢tons de plus en plus grands.  \n:::\n\n**Le r√©sultat identique sur R (donn√©es tri√©es) :**\n\n::: {style=\"max-height: 450px; overflow-y: auto;\"}\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# 1. On trie les donn√©es (comme sur Excel)\ndf_trie <- df %>%\n  filter(!is.na(`Esp Vie Naiss 2017`)) %>%\n  arrange(`Esp Vie Naiss 2017`) %>%\n  mutate(Rang = row_number()) # On cr√©e un num√©ro d'ordre (1, 2, 3...)\n\n# 2. On trace des B√ÇTONS (geom_col)\nggplot(df_trie, aes(x = Rang, y = `Esp Vie Naiss 2017`)) +\n  geom_col(fill = \"#404080\", width = 0.8) +\n  \n  # On ajoute la ligne de la M√©diane (Horizontalement)\n  geom_hline(yintercept = median(df_trie$`Esp Vie Naiss 2017`), \n             color = \"#b89e14\", size = 1.5) +\n  \n  annotate(\"text\", x = 5, y = 78, label = \"M√©diane\", color = \"#b89e14\", fontface = \"bold\") +\n\n  labs(title = \"Q5 : Distribution de l'Esp√©rance de vie (Tri√©e)\", \n       y = \"Esp√©rance de vie (en ann√©es)\", \n       x = \"Pays\") +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](slides_seq1_files/figure-revealjs/q5-sorted-bars-1.png){width=960}\n:::\n:::\n\n\n\n:::\n\n---\n\n## Histogramme (Q6) {.scrollable}\n*Constituer des classes appropri√©es (5 ans).*\n\n::: {.callout-tip}\n### üü¢ Sur Excel\n1.  S√©lectionnez la colonne \"Esp√©rance de vie\".  \n2.  Insertion $\\rightarrow$ Graphiques statistiques (l'ic√¥ne bleue avec des barres) $\\rightarrow$ **Histogramme**.  \n3.  **Important :** Par d√©faut, les classes sont automatiques.  \n    * *Clic droit sur l'axe horizontal* $\\rightarrow$ *Mise en forme de l'axe*.  \n    * Option \"Largeur des classes \" $\\rightarrow$ √âcrire **5** $\\rightarrow$ Classe de soupassement : **50**.     \n:::\n\n**Le r√©sultat attendu (Version R) :**\n\n::: {style=\"max-height: 400px; overflow-y: auto;\"}\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(df, aes(x = `Esp Vie Naiss 2017`)) +\n  geom_histogram(\n    binwidth = 5,       # Largeur de 5 ans\n    boundary = 50,      # On force le d√©marrage sur un chiffre rond (50)\n    closed = \"left\",    # L'intervalle est [50, 55[ (50 inclus, 55 exclu)\n    fill = \"#1591EA\", \n    color = \"white\"\n  ) +\n  # C'est ici qu'on force l'affichage des bornes sur l'axe X\n  scale_x_continuous(breaks = seq(50, 90, 5)) + \n  \n  labs(\n    title = \"Q6 : Histogramme (Classes de 5 ans)\", \n    subtitle = \"Chaque barre repr√©sente une tranche stricte (ex: [75 √† 80[ ans)\",\n    y = \"Nombre de pays\", \n    x = \"Esp√©rance de vie\"\n  ) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](slides_seq1_files/figure-revealjs/q6-histo-clean-1.png){width=960}\n:::\n:::\n\n\n\n:::\n\n# Q7, Q8 & Q9. Bivari√© & r√©gressions\n*Expliquer les liens*\n\n## Covariances et Corr√©lations (Q7) {.scrollable}\n*Comprendre les liens avec l'IDH.*\n\nOn calcule d'abord la **Covariance** (le lien brut) puis la **Corr√©lation** (le lien standardis√©).\n\n::: {.callout-tip}\n### üü¢ Sur Excel\n* **Covariance :** `=COVARIANCE.STANDARD(Plage1; Plage2)`\n    * *R√©sultat flou (ex: 4500)*.\n* **Corr√©lation :** `=COEFFICIENT.CORRELATION(Plage1; Plage2)`\n    * *R√©sultat clair (entre -1 et 1)*.\n:::\n\n**R√©sultats sur R (Matrices compl√®tes) :**\n\n::: {style=\"max-height: 450px; overflow-y: auto;\"}\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# 1. S√©lection des variables\nvars <- df %>% \n  select(`IDH 2017`, `PIB/t√™te (2017)`, `Esp Vie Naiss 2017`, `Ann√©es √©ducation (2017)`)\n\n# 2. Matrice de COVARIANCE (Brute)\n# Difficile √† interpr√©ter car les unit√©s sont m√©lang√©es ($ * Ann√©es)\nprint(\"--- Matrice de COVARIANCE ---\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"--- Matrice de COVARIANCE ---\"\n```\n\n\n:::\n\n```{.r .cell-code}\ncov(vars, use = \"complete.obs\") %>% round(1)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                        IDH 2017 PIB/t√™te (2017) Esp Vie Naiss 2017\nIDH 2017                     0.0          2927.8                1.6\nPIB/t√™te (2017)           2927.8     331042329.2           128981.7\nEsp Vie Naiss 2017           1.6        128981.7               85.8\nAnn√©es √©ducation (2017)      0.6         56017.0               30.2\n                        Ann√©es √©ducation (2017)\nIDH 2017                                    0.6\nPIB/t√™te (2017)                         56017.0\nEsp Vie Naiss 2017                         30.2\nAnn√©es √©ducation (2017)                    13.4\n```\n\n\n:::\n\n```{.r .cell-code}\n# 3. Matrice de CORR√âLATION (Standardis√©e)\n# Id√©ale pour voir les liens avec l'IDH (Max = 1)\nprint(\"--- Matrice de CORR√âLATION ---\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"--- Matrice de CORR√âLATION ---\"\n```\n\n\n:::\n\n```{.r .cell-code}\ncor(vars, use = \"complete.obs\") %>% round(2)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                        IDH 2017 PIB/t√™te (2017) Esp Vie Naiss 2017\nIDH 2017                    1.00            0.88               0.93\nPIB/t√™te (2017)             0.88            1.00               0.77\nEsp Vie Naiss 2017          0.93            0.77               1.00\nAnn√©es √©ducation (2017)     0.97            0.84               0.89\n                        Ann√©es √©ducation (2017)\nIDH 2017                                   0.97\nPIB/t√™te (2017)                            0.84\nEsp Vie Naiss 2017                         0.89\nAnn√©es √©ducation (2017)                    1.00\n```\n\n\n:::\n:::\n\n\n\n:::\n\n## Nuage de points et R√©gression Simple (Q8) {.scrollable}\n*Esp√©rance de vie ~ PIB par t√™te.*\n\n::: {style=\"max-height: 450px; overflow-y: auto;\"}\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(df, aes(x = `PIB/t√™te (2017)`, y = `Esp Vie Naiss 2017`)) +\n  geom_point(alpha = 0.6) +\n  geom_smooth(method = \"lm\", color = \"#C04657\", se = FALSE) + # Droite de r√©gression\n  labs(title = \"Q8 : R√©gression Simple\", x = \"PIB ($)\", y = \"Esp√©rance de vie\") +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](slides_seq1_files/figure-revealjs/q8-reg-1.png){width=960}\n:::\n:::\n\n\n\n:::\n*La ligne droite ne colle pas parfaitement (le lien est courbe), mais la tendance est l√†.*\n\n## R√©gression Lin√©aire Multiple (Q9) {.scrollable}\n*Esp√©rance de vie ~ PIB + √âducation + Population*\n\nOn cherche √† expliquer la sant√© par toutes les variables disponibles (sauf l'IDH qui est une synth√®se).\n\n::: {.callout-tip}\n### üü¢ Sur Excel \nExcel impose une r√®gle stricte : les variables explicatives ($X$) doivent √™tre **coll√©es** (dans des colonnes adjacentes).  \n1.  **Pr√©parez les donn√©es :** Dans une nouvelle zone, copiez la colonne `PIB`, la colonne `√âducation` et la colonne `Population` pour qu'elles soient c√¥te √† c√¥te.  \n2.  **Outil :** Onglet **Donn√©es** $\\rightarrow$ **Utilitaire d'analyse** $\\rightarrow$ **R√©gression**. [En cas d'absence de l'option üîó](https://www.youtube.com/watch?v=hy-lTUZ4whk)  \n3.  **Param√®tres :**  \n    * **Plage Y :** La colonne `Esp√©rance de vie`.  \n    * **Plage X :** Le bloc des **3 colonnes** (PIB, √âducation, Pop) ensemble.  \n    * Cochez **\"Intitul√©s\"** (Labels).  \n:::\n\n**R√©sultat sur R :**  \n\n::: {style=\"max-height: 400px; overflow-y: auto;\"}\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Mod√®le sans le Palma (donn√©es manquantes) et sans l'IDH (tautologie)\nmodele_safe <- lm(`Esp Vie Naiss 2017` ~ `PIB/t√™te (2017)` + \n                  `Ann√©es √©ducation (2017)` + \n                  `Population totale (2017)`, \n                  data = df)\n\n# Affichage des coefficients arrondis\nsummary(modele_safe)$coefficients %>% round(5)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                           Estimate Std. Error  t value Pr(>|t|)\n(Intercept)                43.04944    3.62061 11.89010  0.00000\n`PIB/t√™te (2017)`           0.00002    0.00007  0.36147  0.71965\n`Ann√©es √©ducation (2017)`   2.15964    0.33512  6.44444  0.00000\n`Population totale (2017)`  0.01337    0.02509  0.53282  0.59710\n```\n\n\n:::\n:::\n\n\n\n:::\n\n### Interpr√©tation des r√©sultats  \n\n1.  **L'Intercept (Ordonn√©e √† l'origine) : ~43 ans**  \n    * *C'est quoi ?* C'est l'esp√©rance de vie th√©orique d'un pays qui aurait   **0 partout** (0$ PIB, 0 √©ducation).  \n    * *Sens :* C'est notre \"socle biologique\" minimum sans aucun d√©veloppement.  \n\n2.  **L'√âducation (Significatif `***`) :**  \n    * C'est le **moteur principal**. Chaque ann√©e d'√©tude suppl√©mentaire fait gagner environ **2,15 ans** d'esp√©rance de vie (Coeff: 2.159).  \n\n3.  **La surprise du PIB (Non-significatif) :**  \n    * Sa p-value est de **0.71** (> 0.05).  \n    * *Pourquoi ?* Car l'√âducation a \"absorb√©\" l'effet richesse. Le mod√®le nous dit : ce n'est pas d'√™tre riche qui compte, mais d'√™tre √©duqu√© (ce qui arrive souvent quand on est riche).  \n\n4.  **La Population (Non-significatif) :**  \n    * La taille du pays n'a aucun impact sur la dur√©e de vie.  \n    \n# Q10. Le pi√®ge de l'agr√©gation\n*Pays vs Population mondiale*\n\n## Pond√©ration par la population (Q10) {.scrollable}\n\nPeut-on faire les calculs pour la **population mondiale** ?\nOui, mais il faut pond√©rer chaque pays par son nombre d'habitants.\n\n::: {.callout-tip}\n### üü¢ Sur Excel\nUtilisez `=SOMMEPROD(Valeurs; Poids) / SOMME(Poids)`.\n:::\n\n::: {style=\"max-height: 300px; overflow-y: auto;\"}\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Moyenne \"Pays\" (Non pond√©r√©e)\nm_pays <- mean(df$`Esp Vie Naiss 2017`, na.rm = TRUE)\n\n# Moyenne \"Monde\" (Pond√©r√©e par la population)\nm_monde <- weighted.mean(df$`Esp Vie Naiss 2017`, w = df$`Population totale (2017)`, na.rm = TRUE)\n\ndata.frame(Moyenne_Pays = m_pays, Moyenne_Monde = m_monde)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  Moyenne_Pays Moyenne_Monde\n1     73.42727      73.47755\n```\n\n\n:::\n:::\n\n\n\n:::\n\n# Conclusion (Q11-13)\n\n## Comparaison et Bilan\n\n* **Q11 (Ouverture) :** Vous pouvez tester d'autres mod√®les chez vous.\n* **Q12 (Excel vs R) :**\n    * **Excel :** Intuitif pour voir les donn√©es, bon pour la saisie manuelle.\n    * **R :** Plus puissant pour les graphiques (ggplot), la mod√©lisation (lm) et surtout la **reproductibilit√©** (on relance le script, tout se met √† jour).\n* **Q13 (Commentaires) :**\n    * Le d√©veloppement est tr√®s in√©gal.\n    * La richesse est fortement li√©e √† la sant√©, mais l'√©ducation joue aussi un r√¥le cl√© (comme vu en Q9).",
    "supporting": [
      "slides_seq1_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}